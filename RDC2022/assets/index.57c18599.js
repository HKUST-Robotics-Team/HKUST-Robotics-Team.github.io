const F=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}};F();function u(e){e=Math.round(e),e<0&&(e=0);const t=("0"+Math.floor(e%1e3/10)).slice(-2),s=("0"+Math.floor(e/1e3%60)).slice(-2);return`${("0"+Math.floor(e/60/1e3)).slice(-2)}:${s}.${t}`}var $="/RDC2022/assets/countdown.d79f80a0.mp3",B="/RDC2022/assets/long_beeps.c5591596.mp3",V="/RDC2022/assets/beeps.3e6219b9.mp3";class j{constructor(){this.isRunning=!1,this.startTime=0,this.overallTime=0}_getTimeElapsedSinceLastStart(){return this.startTime?Date.now()-this.startTime:0}start(){this.isRunning||(this.isRunning=!0,this.startTime=Date.now())}stop(){!this.isRunning||(this.isRunning=!1,this.overallTime=this.overallTime+this._getTimeElapsedSinceLastStart())}reset(){if(this.overallTime=0,this.isRunning){this.startTime=Date.now();return}this.startTime=0}getTime(){return this.startTime?this.isRunning?this.overallTime+this._getTimeElapsedSinceLastStart():this.overallTime:0}}const d=document.querySelector("#countdown-timer"),l=document.querySelector("#countup-timer"),I=document.querySelector("#stop");let A=0,m=0,E=!1;const b=new j,S=new Audio;S.src=$;S.preload="auto";S.volume=.5;const g=new Audio;g.src=B;g.preload="auto";g.volume=.5;const w=new Audio;w.src=V;w.preload="auto";w.volume=.5;const q=30*1e3,L=1*60*1e3,h=3*60*1e3;function k(e=L){d.disabled=!1,l.disabled=!1,m=e,b.start(),A=setInterval(G,8)}function v(){d.disabled=!0,l.disabled=!0,b.stop(),clearInterval(A)}function G(){const e=b.getTime();if(e>=m-5200&&!E&&(E=!0,S.play()),m===h&&e>=h){g.play(),v(),I.click(),l.innerText=u(h),d.innerText=u(0),l.classList.add("times-up"),d.classList.add("times-up");const t=new CustomEvent("timerEnded",{detail:{targetTime:h}});document.dispatchEvent(t);return}else m==L&&e>=L?(E=!1,w.play(),v(),b.reset(),k(h)):m===q&&e>=q&&(g.play(),v(),I.click(),l.innerText=u(q),d.innerText=u(0),l.classList.add("times-up"),d.classList.add("times-up"));l.innerText=u(e),d.innerText=u(m-e)}function D(){A=0,b.reset(),E=!1,m=L,d.innerText=u(L),l.innerText=u(0),l.classList.remove("times-up"),d.classList.remove("times-up")}const p={},C=[{en:"Alpha",chi:"\u4E00\u5254\u904E"},{en:"Too easy",chi:"\u592A\u96E3"},{en:"Triumphus",chi:"\u51F1\u6607"},{en:"Stonks",chi:"\u91CD\u5728\u53C3\u8207\u7D44"},{en:"Fibotics",chi:"\u5F975\u5F97"},{en:"Sixy Guys",chi:"\u788C\u67DA"},{en:"24/7"},{en:"Fleming",chi:"\u5F17\u83B1\u660E"}],P=["123","456","789","147","258","369","159","357"],T=document.querySelector("#start"),y=document.querySelector("#stop"),x=document.querySelector("#reset"),R=document.querySelector("#appeal");document.querySelector("#save");document.querySelector("#load");document.querySelector("#cal-final-score");const U=document.querySelectorAll(".team-name"),M=document.querySelectorAll(".counter"),O={red:document.querySelector("#red-base"),blue:document.querySelector("#blue-base")},c=document.querySelector("#grid");let f;U.forEach(e=>{C.forEach(({en:t,chi:s})=>{const a=document.createElement("option");a.value=t,a.text=t,e.appendChild(a)}),e.addEventListener("change",t=>{var r;const s=e.parentElement.querySelector("label"),a=C.find(i=>i.en===t.target.value);a&&(s.innerText=(r=a.chi)!=null?r:"")})});M.forEach(e=>{p[e.id]=0,e.addEventListener("contextmenu",t=>t.preventDefault()),e.addEventListener("mousedown",t=>{H(t,e.id),e.innerText=p[e.id],e.id.split("-").slice(0,1)})});Object.values(O).forEach(e=>{e.addEventListener("click",t=>{t.currentTarget.textContent="\u2713"}),e.addEventListener("contextmenu",t=>{t.preventDefault(),t.currentTarget.textContent=""})});Array.from(c.children).forEach(e=>{e.addEventListener("click",t=>{t.target.classList.remove("bg-[#545454]","bg-blue-700"),t.target.classList.add("bg-red-700"),t.target.dataset.color="red"}),e.addEventListener("contextmenu",t=>{t.preventDefault(),t.target.classList.remove("bg-[#545454]","bg-red-700"),t.target.classList.add("bg-blue-700"),t.target.dataset.color="blue"})});c.addEventListener("mousedown",e=>{setTimeout(()=>{const t=Array.from(c.children).filter(n=>n.dataset.color),s=t.filter(n=>n.dataset.color==="red"),a=t.filter(n=>n.dataset.color==="blue"),r=s.map(n=>n.id),i=a.map(n=>n.id);P.forEach(n=>{const o=c.querySelector(`[data-comb='${n}']`);if(r.includes(n[0])&&r.includes(n[1])&&r.includes(n[2])){o||N(n,"red");const _=new CustomEvent("greatVictory",{detail:{team:"red"}});document.dispatchEvent(_)}else(o==null?void 0:o.dataset.color)==="red"&&c.removeChild(o);if(i.includes(n[0])&&i.includes(n[1])&&i.includes(n[2])){o||N(n,"blue");const _=new CustomEvent("greatVictory",{detail:{team:"blue"}});document.dispatchEvent(_)}else(o==null?void 0:o.dataset.color)==="blue"&&c.removeChild(o)})},200)});function N(e,t){const s=document.createElement("div");switch(s.className="bg-[#FFDF00BC] pointer-events-none rounded-full h-[5%] absolute transform -translate-x-1/2 -translate-y-1/2",s.dataset.comb=e,s.dataset.color=t,e){case"123":s.classList.add("w-[80%]","top-1/6","left-1/2");break;case"456":s.classList.add("w-[80%]","top-1/2","left-1/2");break;case"789":s.classList.add("w-[80%]","top-5/6","left-1/2");break;case"147":s.classList.add("w-[80%]","top-1/2","left-1/6","rotate-90");break;case"258":s.classList.add("w-[80%]","top-1/2","left-1/2","rotate-90");break;case"369":s.classList.add("w-[80%]","top-1/2","left-5/6","rotate-90");break;case"159":s.classList.add("w-[90%]","top-1/2","left-1/2","rotate-45");break;case"357":s.classList.add("w-[90%]","top-1/2","left-1/2","-rotate-45");break}c.appendChild(s)}function H(e,t){if(typeof e=="object")switch(e.button){case 0:return p[t]++,"+1";case 2:return p[t]--,"-1"}}T.addEventListener("click",()=>{T.disabled=!0,y.classList.remove("hidden"),x.classList.add("hidden"),k()});y.addEventListener("click",()=>{y.classList.add("hidden"),x.classList.remove("hidden"),v()});x.addEventListener("click",()=>{T.disabled=!1,R.classList.add("hidden"),D(),W()});R.addEventListener("click",()=>{D(),T.disabled=!0,y.classList.remove("hidden"),x.classList.add("hidden"),k(30*1e3)});document.addEventListener("timerEnded",e=>{R.classList.remove("hidden")});function W(){M.forEach(e=>{p[e.id]=0,e.innerText=p[e.id]}),Object.values(O).forEach(e=>{e.textContent=""}),Array.from(c.children).forEach(e=>{e.classList.remove("bg-red-700","bg-blue-700"),e.classList.add("bg-[#545454]"),delete e.dataset.color}),c.querySelectorAll("div").forEach(e=>c.removeChild(e)),f==null||f.remove(),f=void 0}document.addEventListener("greatVictory",e=>{if(f)return;v(),y.click();const t=document.createElement("div");t.classList.add("great-victory");const s=document.createElement("h1");s.innerText="Great Victory",s.classList.add("text-size-3xl","font-bold"),t.appendChild(s),document.querySelector(`#${e.detail.team}-team`).appendChild(t),f=t});
